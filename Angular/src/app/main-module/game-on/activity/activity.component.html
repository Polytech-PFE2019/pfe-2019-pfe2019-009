<div class="activity2Container" *ngIf="currentActivity?.rolesID.includes(myInformation.id) && !isFinishedMine">
  <h3>Etape {{currentActivity.title}} - Payer des ressources</h3>
  <div class="column" style="width: 90%">
    <nz-table nzBordered [nzData]="myDataSource" [nzNoAnimation]="false" #table [nzFrontPagination]="false">
      <thead>
      <tr>
        <th><img src="../../../../assets/icons/person.png" [width]="20" [height]="20" alt="Person"></th>
        <th><img src="../../../../assets/icons/faillante.png" [width]="20" [height]="20" alt="faillante"></th>
        <th><img src="../../../../assets/icons/duration.png" [width]="20" [height]="20" alt="duration"></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let item of table.data">
        <td>
          <app-activity-displayer
            [role]="item?.roleID"
            [extraPaying]="currentActivity.extraPayment"
            [type]="'MANDATORY'"
            [isActivity]="false"
            (sendPaymentActivity)="getPaymentActivity($event)"
            [activitiesBenefits]="item?.actions[0].actions">
          </app-activity-displayer>
        </td>
        <td>
          <app-activity-displayer [role]="item?.roleID" [isActivity]="true"
                                  (sendPaymentActivity)="getPaymentActivity($event)"
                                  [activitiesBenefits]="item?.actions[1].actions"
                                  [type]="'RISKS'"></app-activity-displayer>
        </td>
        <td>
          <app-activity-displayer [role]="item?.roleID" *ngIf="item?.actions.length > 2"
                                  [activitiesBenefits]="item?.actions[2].actions" [isActivity]="true"
                                  (sendPaymentActivity)="getPaymentActivity($event)" [type]="'DAYS'">
          </app-activity-displayer>
        </td>
      </tr>
      </tbody>
    </nz-table>
    <div class="column">
      <div style="height: 20px"></div>
      <h5>Ressources à payer: {{totalRes}}</h5>
      <h5>Risques à réduire: {{riskReduced}}</h5>
      <h5>Durée à réduire: {{daysReduced}}</h5>

    </div>
  </div>
  <button nz-button nzType="default" nzShape="round" (click)="popConfirm()">Confirmer</button>
  <nz-modal [(nzVisible)]="isVisible" nzTitle="Confirmation" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
    <p>Êtes-vous sûr d'payer {{totalRes}} ressources?</p>
  </nz-modal>
</div>
<div *ngIf="!currentActivity?.rolesID.includes(myInformation.id)">
  <app-prompt></app-prompt>
</div>

<div *ngIf="negotiationIDs.length > 0">
  <button (click)="launchNegotiation()">Lancer la négociation</button>
</div>

<div *ngIf="isFinishedMine && currentActivity?.rolesID.includes(myInformation.id)">
  <app-wait></app-wait>
</div>
